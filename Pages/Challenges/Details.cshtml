@page
@model PCMSystem.Pages.Challenges.DetailsModel

@{
    ViewData["Title"] = Model.Challenge.Title;
}

<div class="container mt-5">
    <h1 class="mb-4">
        @Model.Challenge.Title
        <span class="badge @(Model.Challenge.Status == "Open" ? "bg-success" : Model.Challenge.Status == "Closed" ? "bg-warning text-dark" : "bg-secondary")">
            @(Model.Challenge.Status == "Open" ? "ƒêang m·ªü" : Model.Challenge.Status == "Closed" ? "Ch·ªët r·ªìi" : "Ho√†n th√†nh")
        </span>
    </h1>

    <div class="row">
        <div class="col-md-8">
            <div class="card shadow mb-4 animate__animated card-hover-gradient challenge-card" tabindex="0">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">‚ÑπÔ∏è Th√¥ng tin K√®o</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th style="width: 30%;">Ng∆∞·ªùi t·∫°o:</th>
                            <td>@Model.Challenge.Creator.FullName</td>
                        </tr>
                        <tr>
                            <th>Th·ªÉ th·ª©c:</th>
                            <td><span class="badge bg-info">@Model.Challenge.ModeDisplay</span></td>
                        </tr>
                        <tr>
                            <th>Ph·∫ßn th∆∞·ªüng:</th>
                            <td><strong>@Model.Challenge.RewardDescription</strong></td>
                        </tr>
                        @if (Model.Challenge.Mode == 2)
                        {
                            <tr>
                                <th>L·ªá ph√≠/ng∆∞·ªùi:</th>
                                <td>@Model.Challenge.EntryFee.ToString("C0")</td>
                            </tr>
                            <tr class="table-success">
                                <th>üèÜ T·ªïng Qu·ªπ:</th>
                                <td><strong class="text-success">@Model.Challenge.TotalPot.ToString("C0")</strong></td>
                            </tr>
                        }
                        <tr>
                            <th>Ng√†y t·∫°o:</th>
                            <td>@Model.Challenge.CreatedDate.ToString("dd/MM/yyyy HH:mm")</td>
                        </tr>
                        <tr>
                            <th>M√¥ t·∫£:</th>
                            <td>@(string.IsNullOrEmpty(Model.Challenge.Description) ? "Kh√¥ng c√≥" : Model.Challenge.Description)</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow animate__animated card-hover-gradient challenge-card" tabindex="0">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">üë• Ng∆∞·ªùi tham gia (@Model.Participants.Count)</h5>
                </div>
                <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                    @if (Model.Participants.Count > 0)
                    {
                        <ul class="list-group">
                            @foreach (var participant in Model.Participants)
                            {
                                <li class="list-group-item">
                                    <strong>@participant.FullName</strong>
                                    <br/>
                                    <small class="text-muted">DUPR: @participant.RankLevel.ToString("F1")</small>
                                </li>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="text-muted">Ch∆∞a c√≥ ai tham gia</p>
                    }
                </div>
            </div>

            @if (Model.Challenge.Status == "Open")
            {
                <a asp-page="./AddParticipants" asp-route-challengeId="@Model.Challenge.Id" class="btn btn-success w-100 mt-3">
                    ‚úã Tham gia K√®o (Ch·ªçn h·ªôi vi√™n)
                </a>
            }
        </div>
    </div>

    <div class="mt-4">
        <a asp-page="./Index" class="btn btn-secondary">‚Üê Quay l·∫°i</a>
    </div>
</div>
